<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="author" content="JoBackRer"><meta name="copyright" content="JoBackRer"><meta name="theme-color" content="#FFB347"><meta name="format-detection" content="telephone=no"><meta name="keywords" content="pfc,ca,mc,mod"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="application-name" content="è£…å¤‡ / æ­¦å™¨ API (cbs) | JoBackRer ã® blog"><meta name="apple-mobile-web-app-title" content="è£…å¤‡ / æ­¦å™¨ API (cbs) | JoBackRer ã® blog"><meta name="apple-mobile-web-app-status-bar-style" content="#FFB347"><link rel="canonical" href="https://www.jobackrer.site/posts/433c116d/"><meta name="description" content="ClassBioArsenal æ­¦å™¨ &#x2F; æŠ¤ç”²è¯æ¡ç³»ç»Ÿ API è¯´æ˜æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é’ˆå¯¹ ClassBioArsenal çš„ æ­¦å™¨ &#x2F; æŠ¤ç”²è¯æ¡ç³»ç»Ÿ è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼ŒåŒ…æ‹¬ï¼š  ä½¿ç”¨ Java ç«¯ AffixAPI æŸ¥è¯¢è£…å¤‡å½“å‰è¯æ¡ä¿¡æ¯ï¼› åŸºäº JSON æ–°å¢è¯æ¡ï¼Œå¹¶é€šè¿‡ä»£ç å®ç°è¯æ¡çš„ â€œè¯¦ç»†æ•ˆæœâ€ï¼› åœ¨ Java ä¸­åŠ¨æ€æ³¨å†Œæ–°çš„è¯æ¡å®šä¹‰ã€‚   è¯´æ˜ï¼šä»¥ä¸‹å†…å®¹åŸºäº Forge 1.20.1ã€‚   ..."><meta property="og:type" content="article"><meta property="og:title" content="è£…å¤‡ &#x2F; æ­¦å™¨ API (cbs) | JoBackRer ã® blog"><meta property="og:url" content="https://www.jobackrer.site/posts/433c116d/index.html"><meta property="og:site_name" content="JoBackRer ã® blog"><meta property="og:description" content="ClassBioArsenal æ­¦å™¨ &#x2F; æŠ¤ç”²è¯æ¡ç³»ç»Ÿ API è¯´æ˜æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é’ˆå¯¹ ClassBioArsenal çš„ æ­¦å™¨ &#x2F; æŠ¤ç”²è¯æ¡ç³»ç»Ÿ è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼ŒåŒ…æ‹¬ï¼š  ä½¿ç”¨ Java ç«¯ AffixAPI æŸ¥è¯¢è£…å¤‡å½“å‰è¯æ¡ä¿¡æ¯ï¼› åŸºäº JSON æ–°å¢è¯æ¡ï¼Œå¹¶é€šè¿‡ä»£ç å®ç°è¯æ¡çš„ â€œè¯¦ç»†æ•ˆæœâ€ï¼› åœ¨ Java ä¸­åŠ¨æ€æ³¨å†Œæ–°çš„è¯æ¡å®šä¹‰ã€‚   è¯´æ˜ï¼šä»¥ä¸‹å†…å®¹åŸºäº Forge 1.20.1ã€‚   ..."><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.jobackrer.site/posts/433c116d/assets/images/Hexo-Theme-MEOW.png"><meta property="article:published_time" content="2025-12-12T10:12:45.000Z"><meta property="article:modified_time" content="2025-12-12T10:57:35.351Z"><meta property="article:author" content="JoBackRer"><meta property="article:tag" content="ca"><meta property="article:tag" content="mc"><meta property="article:tag" content="mod"><meta property="article:tag" content="pfc"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://www.jobackrer.site/posts/433c116d/assets/images/Hexo-Theme-MEOW.png"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><title>è£…å¤‡ / æ­¦å™¨ API (cbs) | JoBackRer ã® blog</title><link rel="icon shortcut" href="/assets/images/Hexo-Theme-MEOW.ico"><link rel="preconnect" href="/assets"><link rel="preconnect" href="assets"><link rel="stylesheet" href="/css/style.css"><link rel="prefetch" href="/"><link rel="prefetch" href="/archives"><link rel="prefetch" href="/tags"><meta name="generator" content="Hexo 8.1.1"></head><body bg-style="none"><header><div id="navbar"><div id="nav-info"><a id="site-icon" href="/" title="ä¸»é¡µ"><img src="/assets/images/Hexo-Theme-MEOW.png" alt="Logo"></a><a id="site-name" href="/" title="ä¸»é¡µ"><div>JoBackRer ã® blog</div><img src="/assets/images/svg/uc/uc-home.svg" class="icon noview" alt="Icon"></a></div><div id="nav-menu"><div class="menu-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-article.svg" class="icon noview" alt="Icon"><span>æ–‡ç« </span></a><ul class="sub-menu-item"><li><a href="/archives"><img src="/assets/images/svg/uc/uc-archive.svg" class="icon noview" alt="Icon"><span>å½’æ¡£</span></a></li><li><a href="/categories"><img src="/assets/images/svg/uc/uc-category.svg" class="icon noview" alt="Icon"><span>åˆ†ç±»</span></a></li><li><a href="/tags"><img src="/assets/images/svg/uc/uc-tag.svg" class="icon noview" alt="Icon"><span>æ ‡ç­¾</span></a></li></ul></div><div class="menu-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-face.svg" class="icon noview" alt="Icon"><span>æˆ‘çš„</span></a><ul class="sub-menu-item"><li><a href="/assets/page/about.html"><img src="/assets/images/svg/uc/uc-about.svg" class="icon noview" alt="Icon"><span>å…³äº</span></a></li><li><a href="/friends"><img src="/assets/images/svg/uc/uc-friend.svg" class="icon noview" alt="Icon"><span>å‹æƒ…é“¾æ¥</span></a></li><li><a href="/essay"><img src="/assets/images/svg/uc/uc-gift.svg" class="icon noview" alt="Icon"><span>åŠ¨æ€</span></a></li></ul></div><div class="menu-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-sun.svg" class="icon noview" alt="Icon"><span>å°ç©æ„</span></a><ul class="sub-menu-item"><li><a href="/confession"><img src="/assets/images/svg/uc/uc-about.svg" class="icon noview" alt="Icon"><span>å¼¹çª—è¡¨ç™½ç½‘ç«™</span></a></li></ul></div></div><div id="nav-function"><div id="search-btn"><a href="javascript:void(0);" title="æœç´¢" accesskey="s"><img src="/assets/images/svg/uc/uc-search.svg" class="icon noview" alt="Icon"><span>æœç´¢</span></a></div><div id="menu-btn"><a href="javascript:void(0);" title="æ‰“å¼€èœå•"><img src="/assets/images/svg/uc/uc-menu.svg" class="icon noview" alt="Icon"></a></div></div></div></header><div id="menu-aside"><div id="menu-aside-container"><div id="menu-aside-info"><a href="/" title="ä¸»é¡µ"><img src="/assets/images/Hexo-Theme-MEOW.png" alt="Logo"></a><a href="/" title="ä¸»é¡µ">JoBackRer ã® blog</a></div><div class="menu-aside-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-article.svg" class="icon noview" alt="Icon"><span>æ–‡ç« </span></a><ul class="menu-aside-sub-item"><li><a href="/archives"><img src="/assets/images/svg/uc/uc-archive.svg" class="icon noview" alt="Icon"><span>å½’æ¡£</span></a></li><li><a href="/categories"><img src="/assets/images/svg/uc/uc-category.svg" class="icon noview" alt="Icon"><span>åˆ†ç±»</span></a></li><li><a href="/tags"><img src="/assets/images/svg/uc/uc-tag.svg" class="icon noview" alt="Icon"><span>æ ‡ç­¾</span></a></li></ul></div><div class="menu-aside-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-face.svg" class="icon noview" alt="Icon"><span>æˆ‘çš„</span></a><ul class="menu-aside-sub-item"><li><a href="/assets/page/about.html"><img src="/assets/images/svg/uc/uc-about.svg" class="icon noview" alt="Icon"><span>å…³äº</span></a></li><li><a href="/friends"><img src="/assets/images/svg/uc/uc-friend.svg" class="icon noview" alt="Icon"><span>å‹æƒ…é“¾æ¥</span></a></li><li><a href="/essay"><img src="/assets/images/svg/uc/uc-gift.svg" class="icon noview" alt="Icon"><span>åŠ¨æ€</span></a></li></ul></div><div class="menu-aside-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-sun.svg" class="icon noview" alt="Icon"><span>å°ç©æ„</span></a><ul class="menu-aside-sub-item"><li><a href="/confession"><img src="/assets/images/svg/uc/uc-about.svg" class="icon noview" alt="Icon"><span>å¼¹çª—è¡¨ç™½ç½‘ç«™</span></a></li></ul></div><hr></div></div><main><div class="banner"><div class="banner-info"><div class="banner-avatar"><img src="/assets/img/au.png" alt="Avatar"></div><div class="banner-title">ã€Œ Blog ã€</div></div></div><div class="post-container"><div class="post-main"><div class="post-content"><h1 class="post-title">è£…å¤‡ / æ­¦å™¨ API (cbs)</h1><div class="post-author"><span>ä½œè€…: JoBackRer</span></div><div class="post-meta"><div class="post-info"><div class="post-date"><div class="post-pubdate"><img src="/assets/images/svg/ta/ta-pubdate.svg" class="icon noview" alt="Icon"><span>å‘è¡¨äº2025-12-12</span></div><div class="post-update"><img src="/assets/images/svg/ta/ta-update.svg" class="icon noview" alt="Icon"><span>æ›´æ–°äº2025-12-19</span></div></div><div class="post-read"><div class="post-wordcount"><img src="/assets/images/svg/ta/ta-write.svg" class="icon noview" alt="Icon"><span>æ€»å­—æ•°: 2.1kå­—</span></div><div class="post-readtime"><img src="/assets/images/svg/ta/ta-time.svg" class="icon noview" alt="Icon"><span>é˜…è¯»æ—¶é•¿: 7åˆ†é’Ÿ</span></div></div></div><div class="post-attribute"><div class="post-categories"><img src="/assets/images/svg/ta/ta-category.svg" class="icon noview" alt="Icon"><span><a class="post-categories-link" href="/categories/pfc/">pfc</a><a class="post-categories-link" href="/categories/pfc/ca/">ca</a></span></div><div class="post-tags"><img src="/assets/images/svg/ta/ta-tag.svg" class="icon noview" alt="Icon"><span><a class="post-tags-link" href="/tags/ca/" rel="tag">ca</a><a class="post-tags-link" href="/tags/mc/" rel="tag">mc</a><a class="post-tags-link" href="/tags/mod/" rel="tag">mod</a><a class="post-tags-link" href="/tags/pfc/" rel="tag">pfc</a></span></div></div></div><div class="markdown post" indent="false"><h1 id="ClassBioArsenal-æ­¦å™¨-æŠ¤ç”²è¯æ¡ç³»ç»Ÿ-API-è¯´æ˜"><a href="#ClassBioArsenal-æ­¦å™¨-æŠ¤ç”²è¯æ¡ç³»ç»Ÿ-API-è¯´æ˜" class="headerlink" title="ClassBioArsenal æ­¦å™¨ / æŠ¤ç”²è¯æ¡ç³»ç»Ÿ API è¯´æ˜"></a>ClassBioArsenal æ­¦å™¨ / æŠ¤ç”²è¯æ¡ç³»ç»Ÿ API è¯´æ˜</h1><p>æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é’ˆå¯¹ ClassBioArsenal çš„ <strong>æ­¦å™¨ / æŠ¤ç”²è¯æ¡ç³»ç»Ÿ</strong> è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼ŒåŒ…æ‹¬ï¼š</p> <ul> <li>ä½¿ç”¨ Java ç«¯ <code>AffixAPI</code> æŸ¥è¯¢è£…å¤‡å½“å‰è¯æ¡ä¿¡æ¯ï¼›</li> <li>åŸºäº JSON æ–°å¢è¯æ¡ï¼Œå¹¶é€šè¿‡ä»£ç å®ç°è¯æ¡çš„ â€œè¯¦ç»†æ•ˆæœâ€ï¼›</li> <li>åœ¨ Java ä¸­åŠ¨æ€æ³¨å†Œæ–°çš„è¯æ¡å®šä¹‰ã€‚</li> </ul> <blockquote> <p>è¯´æ˜ï¼šä»¥ä¸‹å†…å®¹åŸºäº Forge 1.20.1ã€‚</p> </blockquote> <hr> <h2 id="1-Java-AffixAPI"><a href="#1-Java-AffixAPI" class="headerlink" title="1. Java AffixAPI"></a>1. Java AffixAPI</h2><p>å¯¹å¤–å…¥å£ç±»ï¼š</p> <ul> <li>åŒ…åï¼š<code>site.backrer.classbioarsenal.api</code></li> <li>ç±»åï¼š<code>AffixAPI</code></li> </ul> <p>åªè¦åœ¨è¿è¡Œæ—¶ä¾èµ– ClassBioArsenal çš„ jarï¼Œå°±å¯ä»¥åœ¨ä½ çš„æ¨¡ç»„ä¸­ç›´æ¥è°ƒç”¨è¿™äº›é™æ€æ–¹æ³•ã€‚</p> <h3 id="1-1-åŸºç¡€ï¼šåˆ¤æ–­æ˜¯å¦å‚ä¸è¯æ¡ç³»ç»Ÿ"><a href="#1-1-åŸºç¡€ï¼šåˆ¤æ–­æ˜¯å¦å‚ä¸è¯æ¡ç³»ç»Ÿ" class="headerlink" title="1.1 åŸºç¡€ï¼šåˆ¤æ–­æ˜¯å¦å‚ä¸è¯æ¡ç³»ç»Ÿ"></a>1.1 åŸºç¡€ï¼šåˆ¤æ–­æ˜¯å¦å‚ä¸è¯æ¡ç³»ç»Ÿ</h3><ul> <li><p><code>boolean isWeapon(ItemStack stack)</code><br>åˆ¤æ–­è¯¥ç‰©å“æ˜¯å¦è¢«è§†ä¸º â€œæ­¦å™¨â€ï¼ˆç”± <code>weapon_config.json</code> å’Œé»˜è®¤è§„åˆ™å†³å®šï¼‰ã€‚</p> </li> <li><p><code>boolean isArmor(ItemStack stack)</code><br>åˆ¤æ–­è¯¥ç‰©å“æ˜¯å¦è¢«è§†ä¸º â€œæŠ¤ç”²â€ï¼ˆç”± <code>armor_config.json</code> å’Œé»˜è®¤è§„åˆ™å†³å®šï¼‰ã€‚</p> </li> </ul> <h3 id="1-2-è¯»å–è£…å¤‡ä¸Šçš„è¯æ¡"><a href="#1-2-è¯»å–è£…å¤‡ä¸Šçš„è¯æ¡" class="headerlink" title="1.2 è¯»å–è£…å¤‡ä¸Šçš„è¯æ¡"></a>1.2 è¯»å–è£…å¤‡ä¸Šçš„è¯æ¡</h3><ul> <li><p><code>@Nullable WeaponStats getWeaponStats(ItemStack stack)</code><br>è¿”å›æ­¦å™¨å†…éƒ¨çš„è¯æ¡æ•°æ®å¯¹è±¡ï¼›ä¸æ˜¯æœ‰æ•ˆæ­¦å™¨æˆ–å°šæœªåˆå§‹åŒ–æ—¶è¿”å› <code>null</code>ã€‚</p> </li> <li><p><code>@Nullable ArmorStats getArmorStats(ItemStack stack)</code><br>è¿”å›æŠ¤ç”²å†…éƒ¨çš„è¯æ¡æ•°æ®å¯¹è±¡ï¼›ä¸æ˜¯æœ‰æ•ˆæŠ¤ç”²æˆ–å°šæœªåˆå§‹åŒ–æ—¶è¿”å› <code>null</code>ã€‚</p> </li> <li><p><code>Map&lt;String, Integer&gt; getWeaponAffixLevels(ItemStack stack)</code><br>è·å–æ­¦å™¨æ‰€æœ‰è¯æ¡çš„ <code>(id -&gt; level)</code> æ˜ å°„ï¼›æ— è¯æ¡æˆ–æ— æ•ˆæ­¦å™¨æ—¶è¿”å›ç©º Mapã€‚</p> </li> <li><p><code>Map&lt;String, Integer&gt; getArmorAffixLevels(ItemStack stack)</code><br>è·å–æŠ¤ç”²æ‰€æœ‰è¯æ¡çš„ <code>(id -&gt; level)</code> æ˜ å°„ã€‚</p> </li> <li><p><code>int getWeaponAffixLevel(ItemStack stack, String affixId)</code><br>è·å–æŒ‡å®šæ­¦å™¨è¯æ¡çš„ç­‰çº§ï¼Œä¸å­˜åœ¨åˆ™è¿”å› <code>0</code>ã€‚</p> </li> <li><p><code>int getArmorAffixLevel(ItemStack stack, String affixId)</code><br>è·å–æŒ‡å®šæŠ¤ç”²è¯æ¡çš„ç­‰çº§ï¼Œä¸å­˜åœ¨åˆ™è¿”å› <code>0</code>ã€‚</p> </li> <li><p><code>double getWeaponAffixValue(ItemStack stack, String affixId)</code><br>æŒ‰å½“å‰ç­‰çº§å’Œé…ç½®ï¼Œè®¡ç®—æŸæ­¦å™¨è¯æ¡çš„ â€œå®é™…æ•°å€¼â€ï¼ˆä¸æ¨¡ç»„å†…éƒ¨æˆ˜æ–—å…¬å¼ä¸€è‡´ï¼‰ã€‚</p> </li> <li><p><code>double getArmorAffixValue(ItemStack stack, String affixId)</code><br>è®¡ç®—æŸæŠ¤ç”²è¯æ¡çš„ â€œå®é™…æ•°å€¼â€ã€‚</p> </li> </ul> <h3 id="1-3-ç­‰çº§ä¸ç»éªŒ-API"><a href="#1-3-ç­‰çº§ä¸ç»éªŒ-API" class="headerlink" title="1.3 ç­‰çº§ä¸ç»éªŒ API"></a>1.3 ç­‰çº§ä¸ç»éªŒ API</h3><ul> <li><p><code>int getWeaponLevel(ItemStack stack)</code><br>è·å–æ­¦å™¨ç­‰çº§ï¼›æœªåˆå§‹åŒ–æˆ–éæœ‰æ•ˆæ­¦å™¨æ—¶è¿”å› 0ã€‚</p> </li> <li><p><code>int getWeaponXp(ItemStack stack)</code><br>è·å–æ­¦å™¨å½“å‰ç»éªŒï¼›æœªåˆå§‹åŒ–æˆ–éæœ‰æ•ˆæ­¦å™¨æ—¶è¿”å› 0ã€‚</p> </li> <li><p><code>int getWeaponXpToNextLevel(ItemStack stack)</code><br>è·å–æ­¦å™¨è·ç¦»ä¸‹ä¸€çº§æ‰€éœ€ç»éªŒå€¼ï¼›è‹¥å·²è¾¾æœ€é«˜ç­‰çº§æˆ–é…ç½®ç¼ºå¤±åˆ™è¿”å› 0ã€‚</p> </li> <li><p><code>boolean addWeaponXp(ItemStack stack, Player player, int amount)</code><br>ä¸ºæ­¦å™¨å¢åŠ ç»éªŒå€¼ï¼Œå†…éƒ¨ä¼šè°ƒç”¨åŸæœ‰çš„ <code>WeaponEventHandler.checkLevelUp</code>ï¼š</p> <ul> <li>å¤„ç†å¤šçº§å‡çº§ï¼›</li> <li>è§¦å‘è¯æ¡è§£é” / å‡çº§é€»è¾‘ï¼›</li> <li>ä¿å­˜å› NBTã€‚<br>è‹¥æœ¬æ¬¡è°ƒç”¨å¯¼è‡´æ­¦å™¨ç­‰çº§å‘ç”Ÿå˜åŒ–ï¼Œåˆ™è¿”å› <code>true</code>ã€‚</li> </ul> </li> <li><p><code>int getArmorLevel(ItemStack stack)</code><br>è·å–æŠ¤ç”²ç­‰çº§ï¼›æœªåˆå§‹åŒ–æˆ–éæœ‰æ•ˆæŠ¤ç”²æ—¶è¿”å› 0ã€‚</p> </li> <li><p><code>int getArmorXp(ItemStack stack)</code><br>è·å–æŠ¤ç”²å½“å‰ç»éªŒï¼›æœªåˆå§‹åŒ–æˆ–éæœ‰æ•ˆæŠ¤ç”²æ—¶è¿”å› 0ã€‚</p> </li> <li><p><code>int getArmorXpToNextLevel(ItemStack stack)</code><br>è·å–æŠ¤ç”²è·ç¦»ä¸‹ä¸€çº§æ‰€éœ€ç»éªŒå€¼ï¼›è‹¥å·²è¾¾æœ€é«˜ç­‰çº§æˆ–é…ç½®ç¼ºå¤±åˆ™è¿”å› 0ã€‚</p> </li> <li><p><code>boolean addArmorXp(ItemStack stack, Player player, int amount)</code><br>ä¸ºæŠ¤ç”²å¢åŠ ç»éªŒå€¼ï¼Œå†…éƒ¨ä¼šè°ƒç”¨åŸæœ‰çš„ <code>ArmorEventHandler.checkLevelUp</code> å®Œæˆå‡çº§ä¸è¯æ¡è§£é” / å‡çº§ï¼Œè‹¥ç­‰çº§å˜åŒ–åˆ™è¿”å› <code>true</code>ã€‚</p> </li> </ul> <blockquote> <p>è¯´æ˜ï¼šè¿™äº›ç­‰çº§ API å…¨éƒ¨å¤ç”¨ä½ ç°æœ‰çš„å‡çº§ä¸è¯æ¡è§£é”é€»è¾‘ï¼Œåªæ˜¯æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„å¤–éƒ¨å…¥å£ï¼Œä¸ä¼šæ”¹å˜åŸæœ‰ç³»ç»Ÿè¡Œä¸ºã€‚</p> </blockquote> <h3 id="1-4-è¯»å–è¯æ¡é…ç½®å®šä¹‰"><a href="#1-4-è¯»å–è¯æ¡é…ç½®å®šä¹‰" class="headerlink" title="1.4 è¯»å–è¯æ¡é…ç½®å®šä¹‰"></a>1.4 è¯»å–è¯æ¡é…ç½®å®šä¹‰</h3><ul> <li><p><code>@Nullable AffixConfig.AffixEntry getWeaponAffixDefinition(String affixId)</code><br>ä»æ­¦å™¨è¯æ¡é…ç½®ä¸­è¯»å–æŒ‡å®š ID çš„å®šä¹‰ï¼ˆå­—æ®µä¸ <code>weapon_system/affixes.json</code> ä¸€è‡´ï¼‰ã€‚</p> </li> <li><p><code>@Nullable AffixConfig.AffixEntry getArmorAffixDefinition(String affixId)</code><br>ä»æŠ¤ç”²è¯æ¡é…ç½®ä¸­è¯»å–æŒ‡å®š ID çš„å®šä¹‰ã€‚</p> </li> </ul> <blockquote> <p>æç¤ºï¼šè¯æ¡å®šä¹‰æœ¬èº«æ¥è‡ª JSONï¼ˆå¯ä»¥è¢«å¤–éƒ¨æ•°æ®åŒ…è¦†ç›–ï¼‰ï¼ŒAffixAPI åªæ˜¯æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ Java è®¿é—®å…¥å£ã€‚</p> </blockquote> <h3 id="1-5-Java-ç«¯åŠ¨æ€æ³¨å†Œæ–°è¯æ¡"><a href="#1-5-Java-ç«¯åŠ¨æ€æ³¨å†Œæ–°è¯æ¡" class="headerlink" title="1.5 Java ç«¯åŠ¨æ€æ³¨å†Œæ–°è¯æ¡"></a>1.5 Java ç«¯åŠ¨æ€æ³¨å†Œæ–°è¯æ¡</h3><ul> <li><p><code>boolean registerWeaponAffix(AffixConfig.AffixEntry entry)</code> </p> </li> <li><p><code>boolean registerArmorAffix(AffixConfig.AffixEntry entry)</code> </p> <p>ç›´æ¥å‘å½“å‰è¯æ¡é…ç½®ä¸­è¿½åŠ ä¸€æ¡æ–°çš„è¯æ¡å®šä¹‰ã€‚ID å·²å­˜åœ¨æˆ–é…ç½®æœªåŠ è½½æ—¶è¿”å› <code>false</code>ã€‚</p> </li> <li><p><code>boolean registerWeaponAffix(String id, String displayName, String description, String type, double minValue, double maxValue, int maxLevel, double growthPerLevel, String color, int weight, @Nullable Map&lt;String, Double&gt; params)</code> </p> </li> <li><p><code>boolean registerArmorAffix(String id, String displayName, String description, String type, double minValue, double maxValue, int maxLevel, double growthPerLevel, String color, int weight, @Nullable Map&lt;String, Double&gt; params)</code> </p> <p>ä½¿ç”¨å­—æ®µå‚æ•°æ„é€ å¹¶æ³¨å†Œä¸€ä¸ªæ–°çš„è¯æ¡å®šä¹‰ï¼Œä¾¿äºåœ¨å…¶å®ƒæ¨¡ç»„ä¸­ç›´æ¥è°ƒç”¨ã€‚</p> </li> </ul> <blockquote> <p>å»ºè®®ï¼šåœ¨ <strong>é…ç½®åŠ è½½å®Œæˆä¹‹å</strong>ï¼ˆä¾‹å¦‚ CommonSetup é˜¶æ®µï¼‰è°ƒç”¨æ³¨å†Œæ–¹æ³•ï¼Œé¿å…åœ¨é…ç½®ä¸º null æ—¶æ³¨å†Œå¤±è´¥ã€‚</p> </blockquote> <p>åŠ¨æ€æ³¨å†Œçš„è¯æ¡ä¼šè¢«åŠ å…¥åˆ°ï¼š</p> <ul> <li>æ­¦å™¨ï¼š<code>ConfigManager.AFFIX_CONFIG.affixes</code></li> <li>æŠ¤ç”²ï¼š<code>ConfigManager.ARMOR_AFFIX_CONFIG.affixes</code></li> </ul> <p>è€Œæ­¦å™¨ / æŠ¤ç”²åˆå§‹åŒ–ä¸å‡çº§é€»è¾‘ä¸­ï¼Œæ­£æ˜¯ä»è¿™ä¸¤ä¸ªåˆ—è¡¨ä¸­ï¼š</p> <ul> <li>åˆå§‹åŒ–æ—¶ï¼šåœ¨ <code>initializeWeaponIfNeeded</code> / <code>initializeArmorIfNeeded</code> é‡Œï¼Œä½¿ç”¨ <code>new ArrayList&lt;&gt;(...affixes)</code> ä½œä¸ºéšæœºå€™é€‰è¯æ¡æ± ï¼›</li> <li>å‡çº§æ—¶ï¼šåœ¨ <code>handleLevelUpBonuses</code> ä¸­é€šè¿‡ <code>ConfigManager.AFFIX_CONFIG.affixes</code> / <code>ARMOR_AFFIX_CONFIG.affixes</code> ä»¥åŠ <code>ConfigManager.getAffix(...)</code> é€‰æ‹©è§£é”æˆ–å‡çº§çš„è¯æ¡ã€‚</li> </ul> <p>å› æ­¤ï¼š</p> <ul> <li><strong>ä¹‹åæ–°è·å¾—æˆ–å‡çº§çš„è£…å¤‡</strong>ï¼Œä¼šæŠŠä½ æ³¨å†Œçš„æ–°è¯æ¡è§†ä¸ºæ­£å¸¸å€™é€‰ï¼›</li> <li><strong>å·²ç»ç”Ÿæˆä¸”å·² roll å¥½è¯æ¡çš„æ—§è£…å¤‡</strong>ï¼Œä¸ä¼šè‡ªåŠ¨é‡æ–°æ´—è¯æ¡ï¼Œåªä¼šåœ¨ä»Šåçš„ â€œå‡çº§è§£é” / å‡çº§è¯æ¡â€ æ—¶æœ‰æœºä¼šæŠ½åˆ°æ–°è¯æ¡ã€‚</li> </ul> <hr> <h2 id="2-é€šè¿‡-JSON-æ–°å¢è¯æ¡ï¼Œå†ç”¨-AffixAPI-å®ç°è¯¦ç»†æ•ˆæœ"><a href="#2-é€šè¿‡-JSON-æ–°å¢è¯æ¡ï¼Œå†ç”¨-AffixAPI-å®ç°è¯¦ç»†æ•ˆæœ" class="headerlink" title="2. é€šè¿‡ JSON æ–°å¢è¯æ¡ï¼Œå†ç”¨ AffixAPI å®ç°è¯¦ç»†æ•ˆæœ"></a>2. é€šè¿‡ JSON æ–°å¢è¯æ¡ï¼Œå†ç”¨ AffixAPI å®ç°è¯¦ç»†æ•ˆæœ</h2><p>è¯æ¡åŸºç¡€ä¿¡æ¯ç”± JSON å®šä¹‰ï¼Œè¯¦ç»†æ•ˆæœç”± Java ä»£ç å®ç°ã€‚æ•´ä½“æµç¨‹ï¼š</p> <ol> <li>åœ¨æ•°æ®åŒ… / æ¨¡ç»„èµ„æºä¸­æ–°å¢ä¸€ä¸ªè¯æ¡å®šä¹‰ï¼ˆJSONï¼‰ã€‚ </li> <li>åœ¨ä½ çš„æ¨¡ç»„ä»£ç ä¸­ï¼Œé€šè¿‡ <code>AffixAPI</code> è¯»å–è¯¥è¯æ¡çš„ç­‰çº§ä¸æ•°å€¼ï¼Œåœ¨å¯¹åº”äº‹ä»¶ä¸­å†™å…·ä½“æ•ˆæœã€‚</li> </ol> <h3 id="2-1-åœ¨-weapon-system-affixes-json-ä¸­æ–°å¢æ­¦å™¨è¯æ¡"><a href="#2-1-åœ¨-weapon-system-affixes-json-ä¸­æ–°å¢æ­¦å™¨è¯æ¡" class="headerlink" title="2.1 åœ¨ weapon_system/affixes.json ä¸­æ–°å¢æ­¦å™¨è¯æ¡"></a>2.1 åœ¨ weapon_system / affixes.json ä¸­æ–°å¢æ­¦å™¨è¯æ¡</h3><p>å‡è®¾æˆ‘ä»¬æƒ³æ–°å¢ä¸€ä¸ª <strong>æµè¡€ (BLEED)</strong> è¯æ¡ï¼Œå¯¹è¢«æ”»å‡»ç›®æ ‡æ–½åŠ æŒç»­æ‰è¡€æ•ˆæœï¼š</p> <div class="code-container" code-lang="Jsonc"><div class="codebox"><figure class="highlight jsonc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"affixes"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="comment">// ... åŸæœ‰é…ç½® ...</span></span><br><span class="line">    <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"id"</span><span class="punctuation">:</span> <span class="string">"BLEED"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"display_name"</span><span class="punctuation">:</span> <span class="string">"æµè¡€"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"description"</span><span class="punctuation">:</span> <span class="string">"æ”»å‡»æ—¶ä½¿ç›®æ ‡æµè¡€ï¼ŒæŒç»­æ‰è¡€"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"PASSIVE_DOT"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"min_value"</span><span class="punctuation">:</span> <span class="number">1.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"max_value"</span><span class="punctuation">:</span> <span class="number">5.0</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"max_level"</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"growth_per_level"</span><span class="punctuation">:</span> <span class="number">0.4</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"color"</span><span class="punctuation">:</span> <span class="string">"Â§4"</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"weight"</span><span class="punctuation">:</span> <span class="number">30</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 9l6 6l6 -6"></path></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"></path><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"></path></svg></div></div></div> <blockquote> <p>å®é™…ä½¿ç”¨æ—¶å»ºè®®é€šè¿‡ <strong>å¤–éƒ¨æ•°æ®åŒ…</strong> æˆ–å¤åˆ¶åŸ JSON ååˆå¹¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ¨¡ç»„ jar å†…éƒ¨æ–‡ä»¶ã€‚</p> </blockquote> <h3 id="2-2-ä½¿ç”¨-AffixAPI-åœ¨æ”»å‡»äº‹ä»¶ä¸­å®ç°æµè¡€æ•ˆæœ"><a href="#2-2-ä½¿ç”¨-AffixAPI-åœ¨æ”»å‡»äº‹ä»¶ä¸­å®ç°æµè¡€æ•ˆæœ" class="headerlink" title="2.2 ä½¿ç”¨ AffixAPI åœ¨æ”»å‡»äº‹ä»¶ä¸­å®ç°æµè¡€æ•ˆæœ"></a>2.2 ä½¿ç”¨ AffixAPI åœ¨æ”»å‡»äº‹ä»¶ä¸­å®ç°æµè¡€æ•ˆæœ</h3><p>åœ¨ä½ çš„æ¨¡ç»„ä¸­ç›‘å¬ <code>LivingHurtEvent</code>ï¼Œæ£€æµ‹å½“å‰æ­¦å™¨æ˜¯å¦æ‹¥æœ‰ <code>BLEED</code> è¯æ¡ï¼Œå¹¶æ ¹æ®å…¶æ•°å€¼æ–½åŠ æŒç»­ä¼¤å®³ï¼š</p> <div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mod</span>.EventBusSubscriber(modid = <span class="string">"your_modid"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class_ title">BleedAffixHandler</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BLEED_AFFIX_ID</span> <span class="operator">=</span> <span class="string">"BLEED"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SubscribeEvent</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="function_ title">onLivingHurt</span><span class="params">(LivingHurtEvent event)</span> {</span><br><span class="line">        <span class="keyword">if</span> (!(event.getSource().getEntity() <span class="keyword">instanceof</span> Player player)) {</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="type">ItemStack</span> <span class="variable">weapon</span> <span class="operator">=</span> player.getMainHandItem();</span><br><span class="line">        <span class="keyword">if</span> (!AffixAPI.isWeapon(weapon)) {</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å½“å‰æ­¦å™¨ä¸Š BLEED çš„â€œæ•°å€¼â€ï¼Œä¾‹å¦‚ 1.0 ~ 5.0ï¼ˆå¯æŒ‰ç­‰çº§æˆé•¿ï¼‰</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">bleedValue</span> <span class="operator">=</span> AffixAPI.getWeaponAffixValue(weapon, BLEED_AFFIX_ID);</span><br><span class="line">        <span class="keyword">if</span> (bleedValue &lt;= <span class="number">0.0</span>) {</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// æ²¡æœ‰è¯¥è¯æ¡æˆ–æ•°å€¼ä¸º 0</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="type">LivingEntity</span> <span class="variable">target</span> <span class="operator">=</span> event.getEntity();</span><br><span class="line">        <span class="keyword">if</span> (target.level().isClientSide()) {</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">// åªåœ¨æœåŠ¡ç«¯å®ç°æ•ˆæœ</span></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç®€å•ç¤ºä¾‹ï¼šæ ¹æ®æ•°å€¼å†³å®šæµè¡€æŒç»­æ—¶é—´å’Œæ¯è·³ä¼¤å®³</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">duration</span> <span class="operator">=</span> (<span class="type">int</span>) (<span class="number">40</span> + bleedValue * <span class="number">10</span>); <span class="comment">// 2s+ æŒç»­</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">amplifier</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿™é‡Œä¸ºäº†ç¤ºä¾‹ï¼Œå¤ç”¨å‡‹é›¶æ•ˆæœä»£è¡¨â€œæµè¡€â€ï¼Œä½ ä¹Ÿå¯ä»¥å®ç°è‡ªå®šä¹‰æ•ˆæœ</span></span><br><span class="line">        target.addEffect(<span class="keyword">new</span> <span class="class_ title">MobEffectInstance</span>(MobEffects.WITHER, duration, amplifier));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 9l6 6l6 -6"></path></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"></path><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"></path></svg></div></div></div> <p>è¦ç‚¹ï¼š</p> <ul> <li>è¯æ¡æ˜¯å¦å­˜åœ¨ã€ç­‰çº§å’Œæœ€ç»ˆæ•°å€¼ï¼Œç»Ÿä¸€é€šè¿‡ <code>AffixAPI</code> è¯»å–ï¼›</li> <li>JSON åªè´Ÿè´£ â€œæ•°å€¼é…ç½®â€ å’Œ â€œæŠ½å–æƒé‡â€ï¼Œå…·ä½“æ€ä¹ˆç”¨è¿™äº›æ•°å€¼ç”±ä½ çš„ä»£ç å†³å®šï¼›</li> <li>å¯ä»¥é€šè¿‡ <code>AffixAPI.getWeaponAffixLevel(weapon, BLEED_AFFIX_ID)</code> å†æ ¹æ®ç­‰çº§åšé¢å¤–é€»è¾‘ã€‚</li> </ul> <hr> <h2 id="3-åœ¨-Java-ä¸­æ³¨å†Œæ–°çš„è¯æ¡ï¼ˆä¸æ”¹-JSONï¼‰"><a href="#3-åœ¨-Java-ä¸­æ³¨å†Œæ–°çš„è¯æ¡ï¼ˆä¸æ”¹-JSONï¼‰" class="headerlink" title="3. åœ¨ Java ä¸­æ³¨å†Œæ–°çš„è¯æ¡ï¼ˆä¸æ”¹ JSONï¼‰"></a>3. åœ¨ Java ä¸­æ³¨å†Œæ–°çš„è¯æ¡ï¼ˆä¸æ”¹ JSONï¼‰</h2><p>å¦‚æœä½ å¸Œæœ›çº¯ç²¹é€šè¿‡ Java è¿½åŠ è¯æ¡å®šä¹‰ï¼ˆä¾‹å¦‚åªåœ¨æŸä¸ªæœåŠ¡å™¨ç¯å¢ƒä¸­ä¸´æ—¶å¢åŠ ä¸€ä¸ªè¯æ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ³¨å†Œ APIï¼š</p> <h3 id="3-1-åœ¨-CommonSetup-é˜¶æ®µæ³¨å†Œæ­¦å™¨è¯æ¡"><a href="#3-1-åœ¨-CommonSetup-é˜¶æ®µæ³¨å†Œæ­¦å™¨è¯æ¡" class="headerlink" title="3.1 åœ¨ CommonSetup é˜¶æ®µæ³¨å†Œæ­¦å™¨è¯æ¡"></a>3.1 åœ¨ CommonSetup é˜¶æ®µæ³¨å†Œæ­¦å™¨è¯æ¡</h3><div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="class_ title">YourMod</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MODID</span> <span class="operator">=</span> <span class="string">"your_modid"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function_ title">YourMod</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// åœ¨ mod åˆå§‹åŒ–ä¸­æ³¨å†Œ CommonSetup å›è°ƒ</span></span><br><span class="line">        net.minecraftforge.fml.javafmlmod.FMLJavaModLoadingContext.get().getModEventBus()</span><br><span class="line">            .addListener(<span class="built_in">this</span>::onCommonSetup);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="function_ title">onCommonSetup</span><span class="params">(<span class="keyword">final</span> net.minecraftforge.fml.event.lifecycle.FMLCommonSetupEvent event)</span> {</span><br><span class="line">        event.enqueueWork(() -&gt; {</span><br><span class="line">            <span class="comment">// æ³¨å†Œä¸€ä¸ªç®€å•çš„â€œé¢å¤–ä¼¤å®³ç™¾åˆ†æ¯”â€è¯æ¡ EXTRA_DAMAGE_PERCENT</span></span><br><span class="line">            AffixAPI.registerWeaponAffix(</span><br><span class="line">                    <span class="string">"EXTRA_DAMAGE_PERCENT"</span>,   <span class="comment">// id</span></span><br><span class="line">                    <span class="string">"é¢å¤–ä¼¤å®³"</span>,                 <span class="comment">// displayName</span></span><br><span class="line">                    <span class="string">"æé«˜æ”»å‡»ä¼¤å®³ç™¾åˆ†æ¯”"</span>,       <span class="comment">// description</span></span><br><span class="line">                    <span class="string">"STAT_PERCENT"</span>,           <span class="comment">// typeï¼Œè‡ªè¡Œçº¦å®šæˆ–å¤ç”¨ç°æœ‰ç±»å‹</span></span><br><span class="line">                    <span class="number">5.0</span>,                        <span class="comment">// minValue</span></span><br><span class="line">                    <span class="number">25.0</span>,                       <span class="comment">// maxValue</span></span><br><span class="line">                    <span class="number">10</span>,                         <span class="comment">// maxLevel</span></span><br><span class="line">                    <span class="number">2.0</span>,                        <span class="comment">// growthPerLevel</span></span><br><span class="line">                    <span class="string">"Â§c"</span>,                      <span class="comment">// color</span></span><br><span class="line">                    <span class="number">50</span>,                         <span class="comment">// weight æŠ½å–æƒé‡</span></span><br><span class="line">                    <span class="literal">null</span>                        <span class="comment">// é¢å¤–å‚æ•°ï¼ˆå¯ä¸º nullï¼‰</span></span><br><span class="line">            );</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 9l6 6l6 -6"></path></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"></path><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"></path></svg></div></div></div> <p>ä¹‹åï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„äº‹ä»¶ä¸­ä½¿ç”¨ï¼š</p> <div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">extraPercent</span> <span class="operator">=</span> AffixAPI.getWeaponAffixValue(weapon, <span class="string">"EXTRA_DAMAGE_PERCENT"</span>);</span><br><span class="line"><span class="keyword">if</span> (extraPercent &gt; <span class="number">0</span>) {</span><br><span class="line">    <span class="type">float</span> <span class="variable">base</span> <span class="operator">=</span> event.getAmount();</span><br><span class="line">    <span class="type">float</span> <span class="variable">extra</span> <span class="operator">=</span> base * (<span class="type">float</span>) (extraPercent / <span class="number">100.0</span>);</span><br><span class="line">    event.setAmount(base + extra);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 9l6 6l6 -6"></path></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"></path><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"></path></svg></div></div></div> <blockquote> <p>æ³¨æ„ï¼šå¦‚æœåŒä¸€ä¸ªè¯æ¡ ID æ—¢åœ¨ JSON ä¸­å­˜åœ¨ã€åˆåœ¨ Java é‡Œæ³¨å†Œï¼Œç¬¬äºŒæ¬¡æ³¨å†Œä¼šå¤±è´¥ï¼ˆè¿”å› falseï¼‰ï¼Œä»¥é¿å…å†²çªã€‚</p> </blockquote> <hr> <h2 id="4-è°ƒè¯•ä¸é‡è½½"><a href="#4-è°ƒè¯•ä¸é‡è½½" class="headerlink" title="4. è°ƒè¯•ä¸é‡è½½"></a>4. è°ƒè¯•ä¸é‡è½½</h2><ul> <li>è¯æ¡é…ç½®æ¥è‡ªï¼š<ul> <li>æ­¦å™¨ï¼š<code>data/classbioarsenal/weapon_system/affixes.json</code></li> <li>æŠ¤ç”²ï¼š<code>data/classbioarsenal/armor_system/armor_affixes.json</code></li> </ul> </li> <li>è¿™äº›æ–‡ä»¶å¯ä»¥è¢«å¤–éƒ¨æ•°æ®åŒ…è¦†ç›–ï¼Œ<code>ConfigManager</code> ä¼šä¼˜å…ˆåŠ è½½å¤–éƒ¨æ•°æ®åŒ…ä¸­çš„ç‰ˆæœ¬ã€‚</li> </ul> <p>æ¨èçš„è°ƒè¯•æ–¹å¼ï¼š</p> <ol> <li>ä½¿ç”¨æŒ‡ä»¤ <code>/reload</code> æˆ–é‡å¯ä¸–ç•Œä»¥ç¡®ä¿å¤–éƒ¨æ•°æ®åŒ…ç”Ÿæ•ˆï¼› </li> <li>ä½¿ç”¨è‡ªå¸¦è°ƒè¯•æ‰‹æ®µï¼ˆä¾‹å¦‚åœ¨äº‹ä»¶é‡Œ <code>System.out.println(AffixAPI.getWeaponAffixLevels(stack))</code>ï¼‰æŸ¥çœ‹å½“å‰è£…å¤‡çš„è¯æ¡ï¼› </li> <li>è°ƒæ•´ JSON / æ³¨å†Œä»£ç åï¼Œå†æ¬¡é‡è½½å¹¶åœ¨æ¸¸æˆå†…å®æˆ˜æµ‹è¯•æ•ˆæœã€‚</li> </ol> </div><div class="post-reward"><div class="post-reward-btn" title="èµèµä½œè€…"><img src="/assets/images/svg/uc/uc-gift.svg" class="icon noview" alt="Icon"><span>å–œæ¬¢è¿™ç¯‡ä½œå“çš„è¯ï¼Œå¥–åŠ±ä¸€ä¸‹æˆ‘å§ï½</span></div><div class="post-reward-content"><div class="post-reward-text">ğŸ’—æ„Ÿè°¢ä½ çš„å–œæ¬¢ä¸æ”¯æŒï¼</div><div class="post-reward-list"><a href="/null" target="_blank">è‡´è°¢åå•</a></div></div></div><div class="post-copyright"><div class="post-copyright-info">æœ¬ä½œå“ç”± JoBackRer äº 2025-12-12 18:12:45 å‘å¸ƒ</div><div class="post-copyright-link"><span>ä½œå“åœ°å€ï¼š<a href="https://www.jobackrer.site/posts/433c116d/">è£…å¤‡ / æ­¦å™¨ API (cbs)</a></span><button class="copy-text" type="button" data-text="https://www.jobackrer.site/posts/433c116d/">å¤åˆ¶</button></div><div class="post-copyright-detail">é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œæœ¬ç«™ä½œå“å‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" title="ç½²åâ€”éå•†ä¸šæ€§ä½¿ç”¨â€”ç›¸åŒæ–¹å¼å…±äº«" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="/">JoBackRer ã® blog</a></div><img class="noview post-copyright-icon" src="/assets/images/Hexo-Theme-MEOW.png" alt="Logo"></div><div class="post-tail-tags"><a class="post-tail-tags-link" href="/tags/ca/" rel="tag">ca</a><a class="post-tail-tags-link" href="/tags/mc/" rel="tag">mc</a><a class="post-tail-tags-link" href="/tags/mod/" rel="tag">mod</a><a class="post-tail-tags-link" href="/tags/pfc/" rel="tag">pfc</a></div></div><aside id="post-sidebar" status="show"><div id="toc-container"><div class="toc-title"><img src="/assets/images/svg/ta/ta-toc.svg" class="icon noview" alt="Icon"><span>ç›®å½•</span></div><div class="toc-content" id="toc-div"><ol class="toc-list"><li class="toc-list-item toc-list-level-1"><a class="toc-list-link" href="#ClassBioArsenal-%E6%AD%A6%E5%99%A8-%E6%8A%A4%E7%94%B2%E8%AF%8D%E6%9D%A1%E7%B3%BB%E7%BB%9F-API-%E8%AF%B4%E6%98%8E"><span class="toc-list-text">ClassBioArsenal æ­¦å™¨ &#x2F; æŠ¤ç”²è¯æ¡ç³»ç»Ÿ API è¯´æ˜</span></a><ol class="toc-list-child"><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#1-Java-AffixAPI"><span class="toc-list-text">1. Java AffixAPI</span></a><ol class="toc-list-child"><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#1-1-%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%8F%82%E4%B8%8E%E8%AF%8D%E6%9D%A1%E7%B3%BB%E7%BB%9F"><span class="toc-list-text">1.1 åŸºç¡€ï¼šåˆ¤æ–­æ˜¯å¦å‚ä¸è¯æ¡ç³»ç»Ÿ</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#1-2-%E8%AF%BB%E5%8F%96%E8%A3%85%E5%A4%87%E4%B8%8A%E7%9A%84%E8%AF%8D%E6%9D%A1"><span class="toc-list-text">1.2 è¯»å–è£…å¤‡ä¸Šçš„è¯æ¡</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#1-3-%E7%AD%89%E7%BA%A7%E4%B8%8E%E7%BB%8F%E9%AA%8C-API"><span class="toc-list-text">1.3 ç­‰çº§ä¸ç»éªŒ API</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#1-4-%E8%AF%BB%E5%8F%96%E8%AF%8D%E6%9D%A1%E9%85%8D%E7%BD%AE%E5%AE%9A%E4%B9%89"><span class="toc-list-text">1.4 è¯»å–è¯æ¡é…ç½®å®šä¹‰</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#1-5-Java-%E7%AB%AF%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E6%96%B0%E8%AF%8D%E6%9D%A1"><span class="toc-list-text">1.5 Java ç«¯åŠ¨æ€æ³¨å†Œæ–°è¯æ¡</span></a></li></ol></li><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#2-%E9%80%9A%E8%BF%87-JSON-%E6%96%B0%E5%A2%9E%E8%AF%8D%E6%9D%A1%EF%BC%8C%E5%86%8D%E7%94%A8-AffixAPI-%E5%AE%9E%E7%8E%B0%E8%AF%A6%E7%BB%86%E6%95%88%E6%9E%9C"><span class="toc-list-text">2. é€šè¿‡ JSON æ–°å¢è¯æ¡ï¼Œå†ç”¨ AffixAPI å®ç°è¯¦ç»†æ•ˆæœ</span></a><ol class="toc-list-child"><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#2-1-%E5%9C%A8-weapon-system-affixes-json-%E4%B8%AD%E6%96%B0%E5%A2%9E%E6%AD%A6%E5%99%A8%E8%AF%8D%E6%9D%A1"><span class="toc-list-text">2.1 åœ¨ weapon_system &#x2F; affixes.json ä¸­æ–°å¢æ­¦å™¨è¯æ¡</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#2-2-%E4%BD%BF%E7%94%A8-AffixAPI-%E5%9C%A8%E6%94%BB%E5%87%BB%E4%BA%8B%E4%BB%B6%E4%B8%AD%E5%AE%9E%E7%8E%B0%E6%B5%81%E8%A1%80%E6%95%88%E6%9E%9C"><span class="toc-list-text">2.2 ä½¿ç”¨ AffixAPI åœ¨æ”»å‡»äº‹ä»¶ä¸­å®ç°æµè¡€æ•ˆæœ</span></a></li></ol></li><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#3-%E5%9C%A8-Java-%E4%B8%AD%E6%B3%A8%E5%86%8C%E6%96%B0%E7%9A%84%E8%AF%8D%E6%9D%A1%EF%BC%88%E4%B8%8D%E6%94%B9-JSON%EF%BC%89"><span class="toc-list-text">3. åœ¨ Java ä¸­æ³¨å†Œæ–°çš„è¯æ¡ï¼ˆä¸æ”¹ JSONï¼‰</span></a><ol class="toc-list-child"><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#3-1-%E5%9C%A8-CommonSetup-%E9%98%B6%E6%AE%B5%E6%B3%A8%E5%86%8C%E6%AD%A6%E5%99%A8%E8%AF%8D%E6%9D%A1"><span class="toc-list-text">3.1 åœ¨ CommonSetup é˜¶æ®µæ³¨å†Œæ­¦å™¨è¯æ¡</span></a></li></ol></li><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#4-%E8%B0%83%E8%AF%95%E4%B8%8E%E9%87%8D%E8%BD%BD"><span class="toc-list-text">4. è°ƒè¯•ä¸é‡è½½</span></a></li></ol></li></ol></div></div></aside></div></div><div id="toolbar" hide><div id="toolbar-setting-container" hide><div class="toolbar-item"><button id="tool-color-mode" title="æ·±è‰²æ¨¡å¼" type="button"><img src="/assets/images/svg/ta/ta-moon.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button class="copy-text" id="tool-share" title="åˆ†äº«" type="button" data-text="https://www.jobackrer.site/posts/433c116d/"><img src="/assets/images/svg/ta/ta-share.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-font-size-plus" title="æ”¾å¤§å­—ä½“" type="button"><img src="/assets/images/svg/ta/ta-text-plus.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-font-size-minus" title="ç¼©å°å­—ä½“" type="button"><img src="/assets/images/svg/ta/ta-text-minus.svg" class="icon noview" alt="Icon"></button></div></div><div class="toolbar-container"><div class="toolbar-item"><button id="tool-setting" title="è®¾ç½®" type="button"><img src="/assets/images/svg/ta/ta-setting.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-toc" title="ç›®å½•" type="button"><img src="/assets/images/svg/ta/ta-toc.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-gototop" title="è¿”å›é¡¶éƒ¨" type="button"><img src="/assets/images/svg/ta/ta-up.svg" class="icon noview" alt="Icon"></button></div></div></div><div class="search-overlay"><div class="search-container"><div class="search-header"><div class="search-title"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg> æœç´¢</div><div class="search-close-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 21a9 9 0 0 0 9 -9a9 9 0 0 0 -9 -9a9 9 0 0 0 -9 9a9 9 0 0 0 9 9z"></path><path d="M9 8l6 8"></path><path d="M15 8l-6 8"></path></svg></div></div><div class="search-input-box"><input id="search-input" type="search" placeholder="è¯·è¾“å…¥å…³é”®è¯è¿›è¡Œç«™å†…æœç´¢â€¦â€¦" maxlength="80"></div><div class="search-result-container"><div class="search-result-icon"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"></path><path d="M21 21l-6 -6"></path></svg></div></div></div></div></main><footer><div class="footer"><div id="footer-copyright">Â© 2025 <span>ğŸ’—</span> <a href="/assets/page/about.html">JoBackRer</a></div><div id="footer-info"><div id="footer-framework">ğŸš€æœ¬ç«™ç”± <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/chanwj/hexo-theme-meow" title="3.2.0" target="_blank">Meow</a> å¼ºåŠ›é©±åŠ¨</div><div id="footer-runtime"><span id="runtime" data-startdate="2025-11-05T22:16:20.000Z">ğŸŒ»å·²ç¨³å®šè¿è¡Œ.å¹´.æœˆ.å¤©</span></div></div><div id="footer-statistic"><span>å…±æ’°å†™19ç¯‡æ–‡ç« ï¼Œå…¨ç«™å…±38.8kå­—</span></div><div id="footer-pageview"><div id="container_site_pv"><span>ğŸ”¥æ€»è®¿é—®é‡</span><span id="vercount_value_site_pv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 6l0 -3"></path><path d="M16.25 7.75l2.15 -2.15"></path><path d="M18 12l3 0"></path><path d="M16.25 16.25l2.15 2.15"></path><path d="M12 18l0 3"></path><path d="M7.75 16.25l-2.15 2.15"></path><path d="M6 12l-3 0"></path><path d="M7.75 7.75l-2.15 -2.15"></path></svg></span></div><div id="container_site_uv"><span>ğŸˆè®¿å®¢äººæ•°</span><span id="vercount_value_site_uv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 6l0 -3"></path><path d="M16.25 7.75l2.15 -2.15"></path><path d="M18 12l3 0"></path><path d="M16.25 16.25l2.15 2.15"></path><path d="M12 18l0 3"></path><path d="M7.75 16.25l-2.15 2.15"></path><path d="M6 12l-3 0"></path><path d="M7.75 7.75l-2.15 -2.15"></path></svg></span></div></div></div></footer><div class="scripts"><script>const GLOBALCONFIG = {
  root: '/',
  toolbar: true,
  lazyload_src: '/assets/images/Meow-Loading.webp',
  friends: false,
  codeblock: true,
  share_text: 'ğŸ±Share From Meow',
  onblur_title: 'å†å›æ¥çœ‹çœ‹å§ï½âœ§(Â´â–½`Êƒâ™¡Æª)',
  mouse_click: true,
  notify:{
    enable: false,
    info: 'å¤åˆ¶æˆåŠŸï½è½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€',
    f12_info: 'å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€ï¼Œè¯·éµå¾ªæœ¬ç«™ç‰ˆæƒåè®®'
  },
  search: {
    enable: true,
    path: 'search.json',
    local: {
      top_n_per_article: 1,
      preload: false
    }
  },
  encrypt: false,
};
</script><script>localStorage.getItem('color-mode')||localStorage.setItem('color-mode','light'),document.body.setAttribute('data-mode',localStorage.getItem('color-mode'));</script> <script src="/js/theme/tools/utils.js"></script> <script src="/js/plugins/dist/lazyload.min.js"></script> <script src="/js/plugins/view-image.min.js"></script> <script src="https://events.vercount.one/js" defer></script><script>localStorage.getItem('font-size')&&(document.querySelector('.post').style.fontSize=localStorage.getItem('font-size')+'px');</script> <script src="/js/plugins/dist/search.js"></script> <script src="/js/main.js" type="module"></script> </div></body></html>